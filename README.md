# 5SecondsGo - å¤šäººåœ¨çº¿é«˜é¢‘æŠ¼æ³¨å°æ¸¸æˆ

<p align="center">
  <img src="docs/logo.png" alt="5SecondsGo Logo" width="200" />
</p>

<p align="center">
  <strong>è½»é‡çº§ã€é«˜å®æ—¶æ€§çš„å¤šäººå³æ—¶æŠ¼æ³¨æ¸¸æˆå¹³å°</strong>
</p>

<p align="center">
  <a href="#åŠŸèƒ½ç‰¹æ€§">åŠŸèƒ½ç‰¹æ€§</a> â€¢
  <a href="#å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a> â€¢
  <a href="#æŠ€æœ¯æ¶æ„">æŠ€æœ¯æ¶æ„</a> â€¢
  <a href="#éƒ¨ç½²æŒ‡å—">éƒ¨ç½²æŒ‡å—</a> â€¢
  <a href="#å¼€å‘æ–‡æ¡£">å¼€å‘æ–‡æ¡£</a>
</p>

---

## é¡¹ç›®ç®€ä»‹

5SecondsGo æ˜¯ä¸€æ¬¾å¤šäººå®æ—¶æŠ¼æ³¨å°æ¸¸æˆå¹³å°ã€‚ç©å®¶é€šè¿‡æˆ¿ä¸»åˆ›å»ºçš„æˆ¿é—´å‚ä¸æ¸¸æˆï¼Œæ¯è½®åŒ…å«5ä¸ªé˜¶æ®µï¼ˆç­‰å¾…â†’å€’è®¡æ—¶â†’ä¸‹æ³¨â†’æ¸¸æˆâ†’ç»“ç®—ï¼‰ï¼Œæ¯é˜¶æ®µå›ºå®š5ç§’ï¼Œç³»ç»Ÿè‡ªåŠ¨ä¸‹æ³¨ã€è‡ªåŠ¨ç»“ç®—ï¼Œä½“éªŒæµç•…åˆºæ¿€ã€‚

### æ ¸å¿ƒäº®ç‚¹

- ğŸ® **å®æ—¶å¤šäººæ¸¸æˆ** - WebSocket å®æ—¶é€šä¿¡ï¼Œæ¯«ç§’çº§å“åº”
- ğŸ² **å¯éªŒè¯å…¬å¹³** - Commit-Reveal éšæœºç®—æ³•ï¼Œç»“æœå¯éªŒè¯
- ğŸ’° **è‡ªåŠ¨ç»“ç®—** - æ™ºèƒ½èµ„é‡‘ç®¡ç†ï¼Œè‡ªåŠ¨ä¸‹æ³¨ä¸ç»“ç®—
- ğŸŒ **å¤šè¯­è¨€æ”¯æŒ** - ä¸­æ–‡/è‹±æ–‡/æ—¥æ–‡/éŸ©æ–‡
- ğŸ“± **è·¨å¹³å°** - iOS/Android åŸç”Ÿåº”ç”¨ + Web ç®¡ç†åå°

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒæ¸¸æˆ
| åŠŸèƒ½ | æè¿° |
|------|------|
| å®æ—¶æŠ¼æ³¨ | 5ç§’ä¸€è½®çš„å¿«èŠ‚å¥æ¸¸æˆä½“éªŒ |
| å¯éªŒè¯éšæœº | Commit-Reveal ç®—æ³•ç¡®ä¿å…¬å¹³ |
| è‡ªåŠ¨ç»“ç®— | ç³»ç»Ÿè‡ªåŠ¨å¤„ç†ä¸‹æ³¨å’Œå¥–é‡‘åˆ†é… |
| èµ„é‡‘æµæ°´ | å®Œæ•´çš„äº¤æ˜“è®°å½•å’Œå®¡è®¡æ—¥å¿— |

### ç¤¾äº¤åŠŸèƒ½
| åŠŸèƒ½ | æè¿° |
|------|------|
| ğŸ‘€ è§‚æˆ˜æ¨¡å¼ | è§‚çœ‹æ¸¸æˆä¸å‚ä¸ä¸‹æ³¨ |
| ğŸ’¬ æˆ¿é—´èŠå¤© | å®æ—¶èŠå¤©ï¼Œæ•æ„Ÿè¯è¿‡æ»¤ |
| ğŸ˜€ è¡¨æƒ…ååº” | 12ç§é¢„è®¾è¡¨æƒ…å¿«é€Ÿäº’åŠ¨ |
| ğŸ‘¥ å¥½å‹ç³»ç»Ÿ | æ·»åŠ å¥½å‹ï¼ŒæŸ¥çœ‹åœ¨çº¿çŠ¶æ€ |
| ğŸ“¨ é‚€è¯·åŠŸèƒ½ | é‚€è¯·é“¾æ¥ï¼Œ24å°æ—¶æœ‰æ•ˆ |

### è¿è¥ç®¡ç†
| åŠŸèƒ½ | æè¿° |
|------|------|
| ğŸ¨ æˆ¿é—´ä¸»é¢˜ | 5ç§å†…ç½®ä¸»é¢˜çš®è‚¤ |
| ğŸ’¼ é’±åŒ…ç®¡ç† | ä½™é¢ç®¡ç†å’Œæ”¶ç›Šç»Ÿè®¡ |
| ğŸ“œ æ¸¸æˆè®°å½• | å†å²è®°å½•æŸ¥è¯¢å’Œå›æ”¾ |
| ğŸ›¡ï¸ é£æ§ç³»ç»Ÿ | å¼‚å¸¸è¡Œä¸ºæ£€æµ‹å’Œæ ‡è®° |
| ğŸ“ˆ ç›‘æ§ä»ªè¡¨ç›˜ | å®æ—¶æŒ‡æ ‡å’Œå†å²è¶‹åŠ¿ |

## æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å®¢æˆ·ç«¯å±‚                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Flutter App       â”‚         Flutter Web Admin             â”‚
â”‚   (iOS/Android)     â”‚         (ç®¡ç†åå°)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                               â”‚
          â”‚  HTTP/WebSocket               â”‚  HTTP
          â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Go æœåŠ¡ç«¯                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Handler â”‚  â”‚ Service â”‚  â”‚  Game   â”‚  â”‚   WS    â”‚        â”‚
â”‚  â”‚  Layer  â”‚  â”‚  Layer  â”‚  â”‚ Engine  â”‚  â”‚   Hub   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚PostgreSQLâ”‚   â”‚  Redis   â”‚   â”‚ Prometheus   â”‚
    â”‚ (æ•°æ®åº“) â”‚   â”‚ (ç¼“å­˜)   â”‚   â”‚ (ç›‘æ§æŒ‡æ ‡)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

| æ¨¡å— | æŠ€æœ¯ | ç‰ˆæœ¬ |
|------|------|------|
| åç«¯æœåŠ¡ | Go | 1.21+ |
| ç§»åŠ¨ç«¯ | Flutter | 3.16+ |
| ç®¡ç†åå° | Flutter Web | 3.16+ |
| æ•°æ®åº“ | PostgreSQL | 15+ |
| ç¼“å­˜ | Redis | 7+ |
| å®æ—¶é€šä¿¡ | WebSocket | - |
| ç›‘æ§ | Prometheus + Grafana | - |
| æ—¥å¿— | Zap + Loki | - |

## é¡¹ç›®ç»“æ„

```
5SecondsGo/
â”œâ”€â”€ server/                 # Go åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ cmd/               # å…¥å£ç¨‹åº
â”‚   â”‚   â”œâ”€â”€ server/       # ä¸»æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ testbot/      # æµ‹è¯•æœºå™¨äºº
â”‚   â”‚   â””â”€â”€ genhash/      # å“ˆå¸Œç”Ÿæˆå·¥å…·
â”‚   â”œâ”€â”€ config/           # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ internal/         # å†…éƒ¨åŒ…
â”‚   â”‚   â”œâ”€â”€ handler/     # HTTP/WS å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ service/     # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ repository/  # æ•°æ®è®¿é—®
â”‚   â”‚   â”œâ”€â”€ model/       # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ game/        # æ¸¸æˆå¼•æ“
â”‚   â”‚   â”œâ”€â”€ ws/          # WebSocket Hub
â”‚   â”‚   â””â”€â”€ cache/       # ç¼“å­˜å±‚
â”‚   â”œâ”€â”€ migrations/       # æ•°æ®åº“è¿ç§»
â”‚   â””â”€â”€ pkg/              # å…¬å…±åŒ…
â”‚
â”œâ”€â”€ app/                    # Flutter ç§»åŠ¨ç«¯
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ core/         # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ providers/   # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ services/    # æœåŠ¡å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ router/      # è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ theme/       # ä¸»é¢˜
â”‚   â”‚   â”œâ”€â”€ features/     # åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/        # è®¤è¯
â”‚   â”‚   â”‚   â”œâ”€â”€ room/        # æˆ¿é—´
â”‚   â”‚   â”‚   â”œâ”€â”€ wallet/      # é’±åŒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ friends/     # å¥½å‹
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ l10n/         # å›½é™…åŒ–
â”‚   â””â”€â”€ assets/           # èµ„æºæ–‡ä»¶
â”‚
â”œâ”€â”€ admin/                  # Flutter Web ç®¡ç†åå°
â”‚   â””â”€â”€ lib/
â”‚       â””â”€â”€ features/
â”‚           â”œâ”€â”€ dashboard/   # ä»ªè¡¨ç›˜
â”‚           â”œâ”€â”€ users/       # ç”¨æˆ·ç®¡ç†
â”‚           â”œâ”€â”€ rooms/       # æˆ¿é—´ç®¡ç†
â”‚           â”œâ”€â”€ funds/       # èµ„é‡‘ç®¡ç†
â”‚           â””â”€â”€ monitoring/  # ç›‘æ§
â”‚
â”œâ”€â”€ deploy/                 # éƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ grafana/          # Grafana ä»ªè¡¨ç›˜
â”‚   â”œâ”€â”€ prometheus/       # Prometheus å‘Šè­¦è§„åˆ™
â”‚   â””â”€â”€ promtail/         # æ—¥å¿—æ”¶é›†é…ç½®
â”‚
â”œâ”€â”€ docs/                   # æ–‡æ¡£
â””â”€â”€ docker-compose.yml      # Docker ç¼–æ’
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Go 1.21+
- Flutter 3.16+
- Docker & Docker Compose
- PostgreSQL 15+ (æˆ–ä½¿ç”¨ Docker)
- Redis 7+ (æˆ–ä½¿ç”¨ Docker)

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/jihongxing/5scondsGo.git
cd 5scondsGo
```

### 2. å¯åŠ¨åŸºç¡€æœåŠ¡

```bash
# å¯åŠ¨ PostgreSQL, Redis, Prometheus, Grafana, Loki
docker-compose up -d
```

### 3. åˆå§‹åŒ–æ•°æ®åº“

```bash
# æ•°æ®åº“ä¼šåœ¨é¦–æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ–
# æˆ–æ‰‹åŠ¨æ‰§è¡Œè¿ç§»è„šæœ¬
psql -h localhost -p 5450 -U fiveseconds -d fiveseconds -f server/migrations/init.sql
```

### 4. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd server
go mod download
go run cmd/server/main.go
```

### 5. å¯åŠ¨ç§»åŠ¨ç«¯ (å¼€å‘æ¨¡å¼)

```bash
cd app
flutter pub get
flutter run
```

### 6. å¯åŠ¨ç®¡ç†åå° (å¼€å‘æ¨¡å¼)

```bash
cd admin
flutter pub get
flutter run -d chrome
```

## æœåŠ¡ç«¯å£

| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
|------|------|------|
| Go Server | 8080 | HTTP API + WebSocket |
| Go Metrics | 9091 | Prometheus æŒ‡æ ‡ |
| PostgreSQL | 5450 | æ•°æ®åº“ |
| Redis | 6450 | ç¼“å­˜ |
| Grafana | 3000 | ç›‘æ§é¢æ¿ |
| Prometheus | 9090 | æŒ‡æ ‡æ”¶é›† |
| Loki | 3100 | æ—¥å¿—æ”¶é›† |

## é»˜è®¤è´¦å·

| è§’è‰² | ç”¨æˆ·å | å¯†ç  | é‚€è¯·ç  |
|------|--------|------|--------|
| ç®¡ç†å‘˜ | admin | admin123 | ADMIN1 |

> âš ï¸ **å®‰å…¨æç¤º**: ç”Ÿäº§ç¯å¢ƒè¯·åŠ¡å¿…ä¿®æ”¹é»˜è®¤å¯†ç å’Œ JWT å¯†é’¥

## é…ç½®è¯´æ˜

### æœåŠ¡ç«¯é…ç½® (server/config/config.yaml)

```yaml
server:
  host: 0.0.0.0
  port: 8080
  mode: release          # debug/release

database:
  host: localhost
  port: 5450
  user: fiveseconds
  password: your-password
  dbname: fiveseconds

redis:
  host: localhost
  port: 6450

game:
  phase_duration: 5      # æ¯é˜¶æ®µæ—¶é•¿(ç§’)
  default_owner_commission: 0.03  # æˆ¿ä¸»ä½£é‡‘æ¯”ä¾‹
  platform_commission: 0.02       # å¹³å°ä½£é‡‘æ¯”ä¾‹

auth:
  jwt_secret: "change-this-in-production"
  jwt_expire: 24h
```

### å®¢æˆ·ç«¯é…ç½®

ä¿®æ”¹ `app/lib/core/services/api_client.dart` ä¸­çš„æœåŠ¡å™¨åœ°å€ï¼š

```dart
static const String baseUrl = 'http://your-server:8080';
static const String wsUrl = 'ws://your-server:8080/ws';
```

## éƒ¨ç½²æŒ‡å—

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t 5secondsgo-server ./server
docker build -t 5secondsgo-admin ./admin

# å¯åŠ¨æœåŠ¡
docker-compose -f docker-compose.prod.yml up -d
```

### ç§»åŠ¨ç«¯å‘å¸ƒ

```bash
# Android APK
cd app
flutter build apk --release

# iOS (éœ€è¦ macOS)
flutter build ios --release
```

### ç®¡ç†åå°å‘å¸ƒ

```bash
cd admin
flutter build web --release
# éƒ¨ç½² build/web ç›®å½•åˆ° Web æœåŠ¡å™¨
```

## å¼€å‘æ–‡æ¡£

| æ–‡æ¡£ | æè¿° |
|------|------|
| [éœ€æ±‚æ–‡æ¡£](docs/å¤šäººåœ¨çº¿é«˜é¢‘æŠ¼æ³¨å°æ¸¸æˆ.md) | äº§å“éœ€æ±‚å’ŒåŠŸèƒ½è§„æ ¼ |
| [æŠ€æœ¯è®¾è®¡](docs/æŠ€æœ¯è®¾è®¡æ–‡æ¡£.md) | ç³»ç»Ÿæ¶æ„å’ŒæŠ€æœ¯æ–¹æ¡ˆ |
| [API å‚è€ƒ](docs/API-Reference.md) | REST API å’Œ WebSocket æ¥å£ |
| [UI è®¾è®¡](docs/UI-Redesign-Card-Based.md) | ç•Œé¢è®¾è®¡è§„èŒƒ |

## æµ‹è¯•

```bash
# åç«¯å•å…ƒæµ‹è¯•
cd server
go test ./...

# åç«¯é›†æˆæµ‹è¯•
go test ./internal/integration_test/...

# å¯åŠ¨æµ‹è¯•æœºå™¨äºº
go run cmd/testbot/main.go -room 1 -bots 5
```

## è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€: https://github.com/jihongxing/5scondsGo
- é—®é¢˜åé¦ˆ: https://github.com/jihongxing/5scondsGo/issues
